String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1);};String.prototype.isUnicode=function(){var reg=new RegExp("[^A-Za-z0-9 \u00A0\\r\\n\\t@Â£$Â¥Ã¨Ã©Ã¹Ã¬Ã²Ã‡Ã˜Ã¸Ã…Ã¥\u0394_\u03A6\u0393\u039B\u03A9\u03A0\u03A8\u03A3\u0398\u039EÃ†Ã¦ÃŸÃ‰!\"#$%&'()*+,\\-./:;<=>?Â¡Ã„Ã–Ã‘ÃœÂ§Â¿Ã¤Ã¶Ã±Ã¼Ã ^{}\\\\\\[~\\]|\u20AC\u2013\u2014ÃµÃ§`â€™Â´â€˜â€™â€²â€³â€œâ€“â€‘âˆ’â€”ä¸€Â«Â»â€ï¼ï¼šâ€¢Â®Î¿Îº]");return reg.test(this);};String.prototype.escapeHtml=function(){var entityMap={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'};return this.replace(/[&<>"'`=\/]/g,function(s){return entityMap[s];});}

$.fn.array_pad=function(input,pad_size,pad_value){var pad=[],newArray=[],newLength,i=0;if(input instanceof Array&&!isNaN(pad_size)){newLength=((pad_size<0)?(pad_size*-1):pad_size);if(newLength>input.length){for(i=0;i<(newLength-input.length);i++){newArray[i]=pad_value;}
pad=((pad_size<0)?newArray.concat(input):input.concat(newArray));}else{pad=input;}}
return pad;};$.fn.format=function(n){var x,i,frac,rgx;n+='';x=n.split('.');i=x[0];frac=x.length>1?'.'+x[1]:'';rgx=/(\d+)(\d{3})/;while(rgx.test(i)){i=i.replace(rgx,'$1'+','+'$2');}

return i+frac;};function doReady(){sidebarToggleInit('#navToggle','has-mobile-nav');toggleInit('.js-toggle-link',200);checkAdd('.form-control');switchAdd('.check-switch');toggleTable();optionsList('.js-list-group');if(typeof $('[data-toggle="tooltip"]').tooltip==='function'){$('[data-toggle="tooltip"]').tooltip();}

if(typeof $('[data-toggle="popover"]').popover==='function'){$('[data-toggle="popover"]').popover();}
fieldEdit('[data-field-edit]');fieldRemove('[data-field-remove]');var $checkAutoRecharge=$('#checkAutoRecharge');if($checkAutoRecharge.length){$checkAutoRecharge.on('click',function(){autoRechargeToggle(this.checked);});autoRechargeToggle($checkAutoRecharge.prop('checked'));}
$('.toolbar').on({'shown.bs.dropdown':function(){var $drop=$(this);$drop.data('closable',false);$drop.closest('.panel-toolbar').addClass('open');},'click':function(e){var $drop=$(this);$('.toolbar').each(function(){$(this).data('closable',true);});var $target=$(e.target);if($target.data('dismiss')!='toolbar'&&$target.data('toggle')!='dropdown'){$drop.data('closable',false);}else{$drop.data('closable',true);}},'hide.bs.dropdown':function(){var $drop=$(this);if($drop.data('closable')){$drop.closest('.panel-toolbar').removeClass('open');}

return $drop.data('closable');}});replaceTagsInTables('.has-replaceable-tags');if($.fn.placeholder){$('input, textarea').placeholder();}
scrollToView('.has-error');initSearchMessageSwitcher();initClickableOptions('select.has-clickable-options');initChosen('select.tm-chosen-select');preventDragnDrop('.no-drop');replaceEmojis('.has-emojis');}

(function($){Date.prototype.addDays=function(days){this.setDate(this.getDate()+days);return this;};Date.prototype.subtractDays=function(days){this.setDate(this.getDate()-days);return this;};if(typeof $.fn.datepicker!=='undefined'&&typeof $.fn.datepicker.noConflict==='function'){$.fn.bootstrapDP=$.fn.datepicker.noConflict();function RangeDatepicker(startDateInputId,endDateInputId){this.startDateElem=$(startDateInputId).parent('.datepicker');this.endDateElem=$(endDateInputId).parent('.datepicker');this.init();}
RangeDatepicker.prototype.init=function(){var me=this;me.startDateElem.on('changeDate',function(e){me.endDateElem.bootstrapDP('setStartDate',e.date);});};$('#dateFilter, #dateFilterForm').find('.datepicker').bootstrapDP({autoclose:true,format:'d M yyyy'});new RangeDatepicker('#dateFilterStart','#dateFilterEnd');var datepickers=$('#sheduleBlock').find('.datepicker');datepickers.first().find('input').bootstrapDP({autoclose:true,todayHighlight:true,format:'d M yyyy',startDate:new Date().subtractDays(1)}).on('changeDate',function(e){var date=e.date;if(date instanceof Date){datepickers.first().datepicker('setDate',date);var day=date.getDate()+1;date.setDate(day);datepickers.last().find('input').bootstrapDP('setStartDate',date);var curDate=datepickers.last().find('input').bootstrapDP('getDate');datepickers.last().find('input').bootstrapDP('setStartDate',date);if(curDate<date){datepickers.last().find('input').bootstrapDP('update',date.format('d mmm yyyy'));}}}).off('focus').on('focus',function(){$(this).bootstrapDP('show');});datepickers.last().find('input').bootstrapDP({autoclose:true,todayHighlight:true,format:'d M yyyy',startDate:new Date().addDays(1)}).on('changeDate',function(e){var date=e.date;if(date instanceof Date){datepickers.last().datepicker('setDate',date);}}).off('focus').on('focus',function(){$(this).bootstrapDP('show');});datepickers.find('.dropdown-toggle').off().on('click',function(e){e.preventDefault();e.stopPropagation();$(this).closest('.datepicker').find('input').bootstrapDP('show');});}})(jQuery);(function($){var app=app||{};app.FrontEndValidator=function(){this.emailPattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;};app.FrontEndValidator.prototype.doValidation=function(input,isValid){if(isValid){$(input).closest('.has-error').removeClass('has-error').addClass('has-success');}else{$(input).closest('.has-success').removeClass('has-success').addClass('has-error');}};app.FrontEndValidator.prototype.validate=function(){var me=this;return function(){var isValid=false,dataField=this.getAttribute('data-field'),userCountry=app.data?app.data.userCountry:$('[name="contact[country]"]').val();if(dataField==='phone'&&typeof i18n==='object')
{var phoneUtil=i18n.phonenumbers.PhoneNumberUtil.getInstance();try{var numberProto=phoneUtil.parse(this.value.trim(),userCountry);isValid=phoneUtil.isValidNumber(numberProto);}
catch(e){if('console'in window){console.log(e);}}
me.doValidation(this,isValid);}
else if(dataField==='email')
{isValid=me.emailPattern.test(this.value.trim());me.doValidation(this,isValid);}
else
{isValid=this.value.trim()!=='';me.doValidation(this,isValid);}}};var validator=new app.FrontEndValidator();var allForms=$(document.forms).filter(function(){return this.id!=='form-register'&&this.id!=='form-addE2sms';});var modals=$('#updateCustomField').add('#updateListModal').add('#addTemplateModal').add('#addBillingMethodModalCreditdebitcard');var inputs=$('input[type=text]',allForms).add('input[type=password]',allForms).add('textarea',allForms).add('select',allForms).add($('input[type=text], input[type=password], textarea, select',modals));inputs.on('input blur change',validator.validate());var vueModalInputs='#vue-modals input[type=text], #vue-modals textarea';$(document).on('input blur',vueModalInputs,validator.validate());$('#newMsgText').on('input blur',function(){if(this.value.trim()!==''){$(this).closest('.has-error').removeClass('has-error').addClass('has-error-place');}else{$(this).closest('.has-error-place').addClass('has-error');}});$('#form-addE2sms').find('textarea').on('input',function(){var isValid=false,emails=this.value.split(/\n/).splice(-1,1);emails.every(function(email){if(validator.emailPattern.test(email.trim())){isValid=true;return false;}else{return true;}});validator.doValidation(this,isValid);});allForms.on('submit',function(){$('*',this).each(function(){$(this).removeClass('has-error has-success');});});if(typeof MutationObserver==='function'){var target=document.querySelector('.tags-block');if(target){var observer=new MutationObserver(function(mutations){var mutation=mutations[0];if(mutation.type==='childList'&&mutation.addedNodes.length){$(mutation.target).closest('.has-error').removeClass('has-error');}});observer.observe(target,{childList:true,attributes:false,characterData:false});}}
$(document).on('click','tr[data-widget="inbox"] a',function(){var phone=$(this).closest('tr').data('phone');var sendLnk=$('#messagedetailModal a[data-widget="send-detail"]');var sendLnkHref=sendLnk.attr('href');var last=sendLnkHref.substring(sendLnkHref.lastIndexOf('/')+1);sendLnk.attr('href',sendLnkHref.replace(last,phone));});})(jQuery);doReady();$(document).ajaxComplete(doReady);function topAlert(alertClass,alertMessage,alertOnClose){$('body').prepend('<div class="text-center well-warning top-alert-box '+alertClass+'">'+alertMessage+'<button aria-hidden="true" data-dismiss="alert" type="button" class="close" style="margin-right: 10px;">Ã—</button></div>').find('.'+alertClass+' button').on('click',function(e){e.preventDefault();if(typeof alertOnClose==="function"){alertOnClose();}});}
function checkJquery(obj){if(!(obj instanceof jQuery)){obj=$(obj);}
return obj;}

function scrollDown($el){$el=checkJquery($el);$el.scrollTop($el[0].scrollHeight);}
function autoRechargeToggle(trigger){var $block=$('.auto-recharge-block');if(trigger){$block.addClass('active');}else{$block.removeClass('active');}}
function sidebarToggleInit(el,navClass){var $navTarget=$('body'),$navToggle=$(el);$navToggle.off('click').on('click',function(){$navTarget.toggleClass(navClass);});}
Number.prototype.formatMoney=function(c,d,t){var n=this,c=isNaN(c=Math.abs(c))?2:c,d=d==undefined?".":d,t=t==undefined?",":t,s=n<0?"-":"",i=parseInt(n=Math.abs(+n||0).toFixed(c))+"",j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):"");};function toggleInit(el,speed){jQuery(el).each(function(){var $link=jQuery(this),$el=jQuery($link.attr('href')),$parent=$link,speed=speed||200;if(!$el.length){$el=$link.next();$parent=$link.parent();}
$link.off('click.toggle').on('click.toggle',function(e){e.stopImmediatePropagation();e.preventDefault();if($parent.hasClass('opened')){$parent.removeClass('opened');$el.stop(true,true).slideUp(speed);}else{$parent.addClass('opened');$parent.siblings().each(function(){$(this).removeClass('opened');$(this).find('.submenu').slideUp(speed);});$el.stop(true,true).slideDown(speed);}});});}
function checkAdd(el){var $parent;if(el instanceof jQuery){$parent=el;el='.form-control';}else{$parent=$('body');}
$parent.find(el+'[type="checkbox"], '+el+'[type="radio"]').each(function(){var $input=$(this);if($input.data('custom'))return;$input.data('custom',true).wrap('<span class="check-item"></span>').after('<span class="check-icon"></span>');var checkItem=$input.parent('.check-item');if(checkItem.parent().is('td')){checkItem.parent().addClass('has-check-item');}
checkUpdate(this);$input.on('change',function(){checkUpdate(this);});});}
function checkRemove(el){$(el+'[type="checkbox"], '+el+'[type="radio"]').each(function(){var $input=$(this);if($input.data('custom')){$input.data('custom',false).unwrap().next('.check-icon').remove();}});}
function switchAdd(el){var $parent;if(el instanceof jQuery){$parent=el;el='.form-control';}else{$parent=$('body');}
$parent.find(el+'[type="checkbox"]').each(function(){var $input=$(this),textCheck=$input.data('text-check')||'On',textUncheck=$input.data('text-uncheck')||'Off';if($input.data('custom'))return;$input.data('custom',true).wrap('<span class="switch-item"></span>').after('<span class="switch-slider-wrap"><span class="switch-slider switch-slider-on">'+textCheck+'</span><span class="switch-slider switch-slider-off">'+textUncheck+'</span></span>');checkUpdate(this);$input.on('change',function(){checkUpdate(this);});});}
function switchRemove(el){$(el+'[type="checkbox"], '+el+'[type="radio"]').each(function(){var $input=$(this);if($input.data('custom')){$input.data('custom',false).unwrap().next('.switch-slider-wrap').remove();}});}
function checkUpdate(input){switch(input.type){case 'checkbox':var $label=$('label[for='+input.id+']');if(!$label.length){$label=$(input).closest('label');}
if(input.checked){$label.addClass('checked');}else{$label.removeClass('checked');}
break;case 'radio':$('input:radio[name="'+input.name+'"]').each(function(){var $label=$('label[for='+this.id+']');if(!$label.length){$label=$(this).closest('label');}
if(this.checked){$label.addClass('checked');}else{$label.removeClass('checked');}});break;}}
(function($){var methods={init:function(){return this.each(btnInit);},disable:function(){return this.each(btnDisable);},enable:function(){return this.each(btnEnable);},loading:function(){return this.each(btnLoading);},reset:function(){return this.each(btnReset);}};$.fn.btn=function(method){if(methods[method])
return methods[method].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof method==='object'||!method)
return methods.init.apply(this,arguments);else
$.error('There are no '+method+' method in jQuery.btn');};var btnInit=function(){var $btn=$(this);}
var btnDisable=function(){$(this).addClass('disabled').prop('disabled',true).on('click.disabled keydown.disabled',disableLink);}
var btnEnable=function(){$(this).removeClass('disabled').prop('disabled',false).off('click.disabled keydown.disabled',disableLink);}
var btnLoading=function(){var $btn=$(this),val=$btn.is('input')?'val':'html';$btn.data('reset-text',$btn[val]())[val]($btn.data('loading-text')||'Loading...').addClass('disabled').prop('disabled',true).on('click.disabled',disableLink);}
var btnReset=function(){var $btn=$(this),val=$btn.is('input')?'val':'html';$btn[val]($btn.data('reset-text'));$btn.removeClass('disabled').prop('disabled',false).off('click.disabled',disableLink);}
var disableLink=function(e){e.preventDefault();return false;}})(jQuery);function buttonDisable($button){$button=checkJquery($button);$button.addClass('disabled').prop('disabled',true).on('click.disabled keydown.disabled',disableLink);}
function buttonEnable($button){$button=checkJquery($button);$button.removeClass('disabled').prop('disabled',false).off('click.disabled keydown.disabled',disableLink);}
function disableLink(e){e.preventDefault();return false;}
function rewriteSpanHtml($spanEl,entries){for(var val in entries){$spanEl.html($spanEl.html().replace(new RegExp(val,"g"),entries[val]));}}
function optionsTableCount(crudApi,$table,$all,$buttons,$counter,count,max){var length=0;if(typeof crudApi.getCheckedItems==='function'){length=crudApi.getCheckedItems().length;}else{length=crudApi.length;};rewriteTableDataSelect($table,length);$all.prop('checked',count==max&&count&&max);$table.data('checked',count==max&&count&&max);$counter.html(length);optionsTableButtons($buttons,length);}
function rewriteTableDataSelect($table,count){if(!count){return;}
try{$table.find('.table-data-select').find('span.select-count').contents().filter(function(){return this.nodeType==3}).each(function(){if(count===1){this.textContent=this.textContent.replace(' are ',' is ');}else if(count>1){this.textContent=this.textContent.replace(' is ',' are ');}});}catch(err){return;}}
function optionsTableCheck($checks){$checks.each(function(){var $row=$(this).closest('tr');this.checked?$row.addClass('checked'):$row.removeClass('checked');});}
function optionsTableButtons($buttons,count){$buttons.each(function(){var $button=$(this).removeClass('selected');if(count>0){buttonEnable($button);}else{buttonDisable($button);}});}
function optionsTableRadio($radios){$radios.each(function(){var $row=$(this).closest('tr');this.checked?$row.addClass('checked'):$row.removeClass('checked');});}
function syncOptionsTableButtons(){$('[data-options-empty-table]').each(function(){var table=$(this).data('options-empty-table');if($('#'+table).length===0){$(this).addClass('disabled');}});$('[data-options-table]').each(function(){var table=$(this).data('options-table');if($('#'+table).length===0){$(this).addClass('disabled');}});$('[data-options-recount]').each(function(){var cont=$(this).data('options-recount');if($(cont).length===0){return;}
var exportCount=parseInt($(cont).find('[data-crud-export-count]').attr('data-crud-export-count'));var isNan=exportCount!==exportCount;if(isNan){$(this).addClass('disabled');}});};function optionsTableToggle($table,toggle){$table=checkJquery($table);var $all=$table.find('thead input[type="checkbox"]');if(toggle!=undefined){switch(toggle){case 'check':$all.prop('checked',false);break;case 'uncheck':$all.prop('checked',true);break;}}
$all.trigger('click');}
function fieldEdit(el,$parent){if($parent!=undefined){$parent=checkJquery($parent);}else{$parent=$('body');}
$parent.find(el).each(function(){var $edit=$(this),$area=$edit.closest('[data-field-area="'+$edit.data('field-edit')+'"]'),$save=$('<button />',{'class':'btn btn-success btn-solid link-item','type':'button','text':'Save'});$edit.off('click.edit').on('click.edit',edit);function edit(e){e.preventDefault();var $edit=$(this).replaceWith($save);$area.addClass('editing').find('[data-field-name]').each(function(){var $field=$(this),val=$field.text(),name=$field.data('field-name');$field.replaceWith('<input data-field-input class="form-control size-auto" type="text" value="'+val+'" name="'+name+'" />');});$save.on('click.edit',function(){$area.removeClass('editing').find('[data-field-input]').each(function(){var $field=$(this),val=$field.val(),name=$field.attr('name');$field.replaceWith('<span data-field-name="'+name+'">'+val+'</span>');});$(this).replaceWith($edit);$edit.on('click.edit',edit);});}});}
function fieldRemove(el,$parent){if($parent!=undefined){$parent=checkJquery($parent);}else{$parent=$('body');}
$parent.find(el).each(function(){var $remove=$(this),$area=$remove.closest('[data-field-area="'+$remove.data('field-remove')+'"]');$remove.off('click.remove').on('click.remove',function(e){e.preventDefault();$area.remove();});});}
function fieldInseart(html,$parent){$parent=checkJquery($parent);$parent.before(html);fieldEdit('[data-field-edit]',$parent.prev());fieldRemove('[data-field-remove]',$parent.prev());}
function toggleTable(){$('[data-toggle="table"]').each(function(){var $link=$(this),$table=$('#'+$link.data('target')),$active=Cookies.get($link.data('target')+'_expand');if($active=='true'){$link.addClass('active');}else{$link.removeClass('active');}
toggleTableControl($link,$table);$link.off('click.table.toggle').on('click.table.toggle',function(e){e.preventDefault();$(this).toggleClass('active');toggleTableControl($(this),$table);});});}
function toggleTableControl($link,$table){if($link.hasClass('active')){$table.addClass('expanded');}else{$table.removeClass('expanded');}
Cookies.set($link.data('target')+'_expand',$link.hasClass('active'),{expires:365});}
function optionsList(el){$(el).each(function(){var $inputs=$(this).find('input[type="checkbox"], input[type="radio"]');$inputs.each(function(){var $input=$(this);optionsListCheck($input);$input.change(function(){optionsListCheck($input);});});});}
function optionsListCheck($input){switch($input.attr('type')){case 'checkbox':optionsListControl($input);break;case 'radio':var group=$input.attr('name');$('input[name="'+group+'"]').each(function(){optionsListControl($(this));});break;default:break;}}
function optionsListControl($input){var $wrap=$input.closest('.js-group-item'),$block=$wrap.children('.js-hidden-item');if($input.prop('checked')){$wrap.addClass('active');}else{$wrap.removeClass('active');}}
(function($){var methods={init:function(text,options){return this.each(function(){spinInit(this,text,options)});},disable:function(){return this.each(spinDisable);},enable:function(text,options){return this.each(function(){spinInit(this,text,options)});},toggle:function(text,options){return this.each(function(){spinToggle(this,text,options)});}};$.fn.spin=function(method,text,options){if(methods[method])
return methods[method].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof method==='object'||!method)
return methods.init.apply(this,Array.prototype.slice.call(arguments,0));else
$.error('There are no '+method+' method in jQuery.spin');};var spinInit=function(el,text,options){var defaults={lines:13,length:4,width:2,radius:4,corners:1,rotate:0,speed:1.4,trail:60,shadow:false,hwaccel:false,className:'js-spin',zIndex:2e9,top:'0',left:'0'},$el=$(el);if($el.is('table')){var $tableTrs=$el.find('tbody tr');if($tableTrs.length==0||!$tableTrs.text()||$tableTrs.text().trim()===''){$el.find('tbody').append('<tr></tr>');var defaultHeight=$el.data('loading-container-height');$el.height(defaultHeight?defaultHeight:500);}
text='Loading your data...';}
if($el.is('table, img')){if(!$el.parent().hasClass('spinner-wrap')){$el.wrap('<div class="spinner-wrap"></div>');}
$el=$el.parent();}
var $text=(typeof text==='string')?'<div class="text">'+text+'</div>':false;var spinData=$el.find('.spinner').data();if(spinData!==null)return false;var spinColor=$el.css('color');if(options){spinColor=options.color||spinColor;}
$.extend(defaults,options,{color:spinColor});var $spinner=$('<span />').attr({'class':'spinner'}),spinnerData=$spinner.data();spinnerData.spinner=new Spinner(defaults).spin($spinner[0]);if($el.hasClass('btn')){$el.btn('loading').text(text).append($spinner);}else{$spinner.wrap('<div class="loading-mask"><div class="mask-content"><div class="mask-text"></div></div></div>').after($text).closest('.loading-mask').appendTo($el);$el.addClass('loading');}}
var spinDisable=function(){var $el=$(this);if($el.is('table, img')){$el=$el.parent();}
var $spinner=$el.find('.spinner'),spinData=$spinner.data();if(spinData!==null&&spinData.spinner){spinData.spinner.stop();$spinner.remove();$el.children('.loading-mask').remove();if($el.hasClass('btn')){$el.btn('reset');}else if($el.hasClass('spinner-wrap')){var cnt=$el.contents();$el.replaceWith(cnt);}else{$el.removeClass('loading');}}}
var spinToggle=function(el,text,options){var $el=$(el),spinData=$el.is('table, img')?$el.parent().find('.spinner').data():$el.find('.spinner').data();if(spinData!==null){methods.disable.call($el);}else{methods.enable.call($el,text,options);}}})(jQuery);(function($){$.fn.extend({disableButton:function(){return buttonDisable(this);},enableButton:function(){return buttonEnable(this);},msgCount:function(options){var defaults={smsLeft:3,rate:{'World':0},msgFormat:'Plain text',lowBalanceCallback:function(){}};var options=$.extend(defaults,options);var mapGSMExtended=['^','{','}','\\','[','~',']','|','â‚¬'];var astralRange=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g;var astralLength=function(text){var match=text.match(astralRange);return(match===null)?0:match.length;};return this.each(function(){var o=options,msgCount=0,restCount=0;setRestrictions(o.msgFormat);var $tarea=$(this).data('msg-Ñount',true),id=$tarea.attr('id'),val=$tarea.val(),msgMax=o.smsLeft*msgCount,msgCurr=astralLength(val);label='Characters',$alert=$('[data-msg-alert="'+id+'"]'),$cost=$('[data-msg-cost="'+id+'"]'),$count=$('[data-msg-count="'+id+'"]'),$sms=$('[data-msg-sms="'+id+'"]'),$format=$('[data-msg-format="'+id+'"]'),$noUser=$(this).data('no-user'),$hintRow=$('[data-msg-hint="'+id+'"]').find('.rates');checkMsgLength();updateCounter();$tarea.off('input.count propertychange.count').on('input.count propertychange.count',function(){val=$(this).val();msgCurr=astralLength(val);checkMsgLength(true);updateCounter();});function testFormat(str){return str.isUnicode()?'Unicode':'Plain text';}
function setRestrictions(msgFormat){switch(o.msgFormat){case 'Unicode':msgCount=67;restCount=3;label='Unicode characters';break;default:msgCount=153;restCount=7;label='Characters';break;}}
function checkMsgLength(focus){var noUdh=false;o.msgFormat=testFormat(val);if(o.msgFormat==='Plain text'){for(var i in mapGSMExtended){var ch=mapGSMExtended[i];msgCurr+=(val.split(ch).length-1);}}
setRestrictions(o.msgFormat);msgMax=o.smsLeft*msgCount;var hasOverLimit=msgCurr>msgMax;$('#sendNowBtn').prop('disabled',hasOverLimit);$('#sheduleNowBtn').prop('disabled',hasOverLimit);$('#addTemplateBtn').prop('disabled',hasOverLimit);}
function updateCounter(){var rateCurr=0,hintOpts='';var smsCurr=0;if(msgCurr==0){smsCurr=0;}else if(msgCurr>msgCount+restCount){smsCurr=Math.ceil(msgCurr/msgCount)}else{smsCurr=1;}
$.each(o.rate,function(key,value){var maxSmsCurr=smsCurr>o.smsLeft?o.smsLeft:smsCurr;var curr=1*(maxSmsCurr*value.sum).toFixed(3);rateCurr+=curr;});$hintRow.html(hintOpts);if(msgCurr>msgMax){$count.html('<span class="text-danger">'+msgCurr+'/'+msgMax+'</span>');$sms.html('<span class="text-danger">'+smsCurr+'/'+o.smsLeft+'</span>');}else{$count.html(msgCurr+'/'+msgMax);$sms.html(smsCurr+'/'+o.smsLeft);}
$cost.html(rateCurr.toFixed(3));$format.html(label);if(typeof $noUser!=='undefined'){return false;}
if(rateCurr>(app.data.userBalance)){var money=rateCurr-app.data.userBalance;var bundle=false;var prices=app.data.bundles;for(var i=0;i<prices.length;i++){if(parseInt(prices[i].bundle)>=money){bundle=prices[i];break;};}
if(bundle){options.lowBalanceCallback(bundle);$('.alert-bar-price').text((bundle.bundle).toFixed());$('div.alert-bar').show();}}}});}});$.extend({confirm:function(options){if($("#confirmModal").length!==1){return false;}
var defaultOptions={title:"",message:"",buttons:{},checkboxes:[]};var apiConfirm;var options=$.extend({},defaultOptions,options);var okButton;var apiModal=$("#confirmModal").modal("api");apiModal.find(".confirmModalTitle").html("");apiModal.find(".confirmModalMessage").html("");apiModal.find(".confirmModalButtons button").remove();apiModal.find(".confirmModalTitle").html(options.title);apiModal.find(".confirmModalMessage").html(options.message);apiModal.on("hide.bs.modal",function(){$(this).find(".confirmModalTitle").html("");$(this).find(".confirmModalMessage").html("");$(this).find(".confirmModalButtons button").remove();});$.each(options.buttons,function(index,element){var $button=$("<button />",{"id":"confirmModalButton_"+index,"text":element.text||"","class":element.class||""});if(index=="cancel"){$button.attr("data-dismiss","modal");}else{var callbackFunction=function(){return false;};if($.isFunction(element.click)){callbackFunction=element.click;}
$button.on("click",function(){callbackFunction.call(apiModal,apiConfirm);});okButton=$button;}
apiModal.find(".confirmModalButtons").append($button);});okButton.prop('disabled',options.checkboxes.length>0);var checkboxesDiv=apiModal.find(".confirmModalCheckboxes");checkboxesDiv.empty();$.each(options.checkboxes,function(index,item){var label=''+
'<div class="checkbox-mark"><input id="confirmModalcheckbox_'+item.name+'" class="form-control" type="checkbox"></div>'+
'<label class="checkbox checked" for="confirmModalcheckbox_'+item.name+'">'+item.text+'</label>';checkboxesDiv.append(label);checkboxesDiv.on('change','input',function(){var isAllChecked=options.checkboxes.length==checkboxesDiv.find('input:checked').length;okButton.prop('disabled',!isAllChecked);});checkAdd(checkboxesDiv);});apiConfirm={hide:function(){apiModal.modal("hide");},show:function(){apiModal.modal("show");},getOptions:function(){return options;}};apiConfirm.show();return apiConfirm;}});$.fn.extend({progress:function(options,callback){var defaults={value:0,max:100};var options=$.extend(defaults,options);return this.each(function(){var o=options,$block=$(this).addClass('with-progress'),$progress=$block.find('.progress-bar'),$wrap=$progress.closest('.progress-wrap');if(!$progress.length){$progress=$('<span />').attr({'class':'progress-bar','style':'width: 0%;'}).html('0%');$progress.wrap('<div class="progress-wrap"><div class="progress progress-striped active"></div></div>');$wrap=$progress.closest('.progress-wrap').appendTo($block);}
var progressValue=Math.round(o.value/o.max*100);$progress.css('width',progressValue+'%').html(progressValue+'%');if(progressValue>=100){$wrap.fadeOut(200);if(typeof callback=='function'){callback.call(this);}}});}});$.fn.extend({getAlertContainer:function(options){var defaults={insertAfter:false};options=$.extend({},defaults,options);$this=this;if(options.insertAfter){$this=$('<div></div>').insertAfter(this);}
return $this;},successBlock:function(text,options){if(typeof(options)==='undefined'||!options.hasOwnProperty('forcePlain')||!options.forcePlain){var noty=notyMessage(text);if(noty){return noty;}}
var local={icon:'<i class="fa tmi30-checked tmi30-14px"></i>',text:text}
return this.getAlertContainer(options).removeClass().addClass('alert alert-success').genericAlertBlock($.extend(local,options));},warningBlock:function(text,options){var local={icon:'<i class="fa tmi30-triangle-warning tmi30-14x"></i>',text:text}
return this.getAlertContainer(options).removeClass().addClass('alert alert-warning').genericAlertBlock($.extend(local,options));},dangerBlock:function(text,options){var local={icon:'<i class="fa tmi30-triangle-warning tmi30-14x"></i>',text:text}
return this.getAlertContainer(options).removeClass().addClass('alert alert-danger').genericAlertBlock($.extend(local,options));},genericAlertBlock:function(options){var defaults={text:'',icon:'',showIcon:true,showClose:true,autoShow:true,insertAfter:false};var closeBtn='<button type="button" class="close" onclick="$(this).parent().hide();">&times;</button>';options=$.extend({},defaults,options);var html=(options.showIcon?options.icon:'')
+(' '+options.text)
+(options.showClose?closeBtn:'');this.html(html);if(options.autoShow){this.show();}
return this;}});})(jQuery);(function($){var methods={init:function(){return this.each(ratingInit);},reset:function(){return this.each(ratingReset);},disable:function(){return this.each(ratingDisable);},enable:function(){return this.each(ratingEnable);}};$.fn.ratingStars=function(method){if(methods[method])
return methods[method].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof method==='object'||!method)
return methods.init.apply(this,arguments);else
$.error('There are no '+method+' method in jQuery.ratingStars');};var ratingInit=function(){var $field=$(this).addClass('stars-field').attr('value',0),checked=$field.attr('value'),fieldClass=this.className,$inputs=$field.find('input');$inputs.each(function(){$(this).attr('index',$(this).index()+1);if(this.checked){checked=$(this).attr('index');$field.attr({'class':fieldClass+' stars-'+checked,'value':checked});}else if(this.disabled)
return;}).hover(function(){$field.attr('class',fieldClass+' stars-'+$(this).attr('index'));},function(){$field.attr('class',fieldClass+' stars-'+checked);}).click(function(){checked=$(this).attr('index');$field.attr({'class':fieldClass+' stars-'+checked,'value':checked});});}
var ratingReset=function(){var $field=$(this),$inputs=$field.find('input');$field.removeClass('stars-'+$field.attr('value')).attr('value',0);$inputs.each(function(){this.checked=false;});}
var ratingDisable=function(){var $inputs=$(this).find('input');$inputs.each(function(){this.disabled=true;});$(this).addClass('disabled');}
var ratingEnable=function(){var $inputs=$(this).find('input');$inputs.each(function(){this.disabled=false;});$(this).removeClass('disabled');}})(jQuery);function ratingToggle(el,trigger){var $el=$(el);if(trigger.checked){$el.ratingStars('disable');}else{$el.ratingStars('enable');}}
jQuery.fn.extend({insertAtCaret:function(html){return this.each(function(i){this.focus();var sel,range;if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){range=sel.getRangeAt(0);range.deleteContents();var el=document.createElement("div");el.innerHTML=html;var frag=document.createDocumentFragment(),node,lastNode;while((node=el.firstChild)){lastNode=frag.appendChild(node);}
var firstNode=frag.firstChild;range.insertNode(frag);if(lastNode){range=range.cloneRange();range.setStartAfter(lastNode);range.collapse(true);sel.removeAllRanges();sel.addRange(range);}}}else if((sel=document.selection)&&sel.type!="Control"){var originalRange=sel.createRange();originalRange.collapse(true);sel.createRange().pasteHTML(html);}});},textAtCaret:function(text){return this.each(function(i){var txtarea=this,scrollPos=txtarea.scrollTop,strPos=0,br=((txtarea.selectionStart||txtarea.selectionStart=='0')?'ff':(document.selection?'ie':false));if(br=='ie'){txtarea.focus();var range=document.selection.createRange();range.moveStart('character',-txtarea.value.length);strPos=range.text.length;}else if(br=='ff'){strPos=txtarea.selectionStart;}
var front=(txtarea.value).substring(0,strPos),back=(txtarea.value).substring(strPos,txtarea.value.length);txtarea.value=front+text+back;strPos=strPos+text.length;if(br=='ie'){txtarea.focus();var range=document.selection.createRange();range.moveStart('character',-txtarea.value.length);range.moveStart('character',strPos);range.moveEnd('character',0);range.select();}else if(br=='ff'){txtarea.selectionStart=strPos;txtarea.selectionEnd=strPos;txtarea.focus();}
txtarea.scrollTop=scrollPos;});}});var OriginalModal=$.fn.modal.Constructor;var _show=OriginalModal.prototype.show;OriginalModal.prototype.show=function(){_show.apply(this,arguments);};var _hide=OriginalModal.prototype.hide;OriginalModal.prototype.hide=function(){_hide.apply(this,arguments);};OriginalModal.prototype.api=function(){return this;};OriginalModal.prototype.title=function(titleValue){if(typeof(titleValue)=="undefined"){return this.$element.find(".modal-title");}else{return this.$element.find(".modal-title").html(titleValue);}};$.fn.modal=$.extend(function(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data('bs.modal');var options=$.extend({},OriginalModal.DEFAULTS,$this.data(),typeof option=='object'&&option);if(!data)
$this.data('bs.modal',(data=new OriginalModal(this,options)));if(typeof option=='string')
data[option](_relatedTarget);else if(options.show)
data.show(_relatedTarget);});},$.fn.modal);$(document).off('click.bs.modal.data-api','[data-toggle="modal"]');$(document).on('click.bs.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr('href');var $target=$($this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,'')));var option=$target.data('modal')?'toggle':$.extend({remote:!/#/.test(href)&&href,$initiator:$this},$target.data(),$this.data());e.preventDefault();$target.modal(option,this).one('hide',function(){$this.is(':visible')&&$this.focus()});});$(document.body).on('shown.bs.dropdown','.dropdown',function(e){if($(this).closest('.table-tm').length){var $body=$('html, body'),$menu=$(this).find(".dropdown-menu"),menuH=$menu.innerHeight(),windowH=$(window).innerHeight(),scrollTop=$(document).scrollTop(),rect=$menu[0].getBoundingClientRect();if(rect.top+menuH>windowH){$body.scrollTop(scrollTop+rect.top+menuH-windowH);}}});$(document.body).on('shown.bs.modal',function(e){var $inp=$(e.currentTarget).find('.modal input[type="text"]:visible, .modal textarea:visible').first();$inp.focus();if($inp[0]){$inp[0].selectionStart=$inp[0].selectionEnd=10000;}});;window.Modernizr=function(a,b,c){function v(a){j.cssText=a}
function w(a,b){return v(prefixes.join(a+";")+(b||""))}
function x(a,b){return typeof a===b}
function y(a,b){return!!~(""+a).indexOf(b)}
function z(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)
return d===!1?a[e]:x(f,"function")?f.bind(d||b):f}
return!1}
var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m={svg:"http://www.w3.org/2000/svg"},n={},o={},p={},q=[],r=q.slice,s,t={}.hasOwnProperty,u;!x(t,"undefined")&&!x(t.call,"undefined")?u=function(a,b){return t.call(a,b)}:u=function(a,b){return b in a&&x(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")
throw new TypeError;var d=r.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(r.call(arguments)));return Object(g)===g?g:f}
return c.apply(b,d.concat(r.call(arguments)))};return e}),n.svg=function(){return!!b.createElementNS&&!!b.createElementNS(m.svg,"svg").createSVGRect};for(var A in n)
u(n,A)&&(s=A.toLowerCase(),e[s]=n[A](),q.push((e[s]?"":"no-")+s));return e.addTest=function(a,b){if(typeof a=="object")
for(var d in a)
u(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)
return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}
return e},v(""),i=k=null,e._version=d,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+q.join(" "):""),e}(this,this.document);!function(t,e,i){var o=["webkit","Moz","ms","O"],r={},n;function a(t,i){var o=e.createElement(t||"div"),r;for(r in i)o[r]=i[r];return o}function s(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var f=function(){var t=a("style",{type:"text/css"});s(e.getElementsByTagName("head")[0],t);return t.sheet||t.styleSheet}();function l(t,e,i,o){var a=["opacity",e,~~(t*100),i,o].join("-"),s=.01+i/o*100,l=Math.max(1-(1-t)/e*(100-s),t),p=n.substring(0,n.indexOf("Animation")).toLowerCase(),u=p&&"-"+p+"-"||"";if(!r[a]){f.insertRule("@"+u+"keyframes "+a+"{"+"0%{opacity:"+l+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+l+"}"+"}",f.cssRules.length);r[a]=1}return a}function p(t,e){var r=t.style,n,a;if(r[e]!==i)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(a=0;a<o.length;a++){n=o[a]+e;if(r[n]!==i)return n}}function u(t,e){for(var i in e)t.style[p(t,i)||i]=e[i];return t}function c(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)if(t[r]===i)t[r]=o[r]}return t}function d(t){var e={x:t.offsetLeft,y:t.offsetTop};while(t=t.offsetParent)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function m(t){if(!this.spin)return new m(t);this.opts=c(t||{},m.defaults,h)}m.defaults={};c(m.prototype,{spin:function(t){this.stop();var e=this,i=e.opts,o=e.el=u(a(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),r=i.radius+i.length+i.width,s,f;if(t){t.insertBefore(o,t.firstChild||null);f=d(t);s=d(o);u(o,{left:(i.left=="auto"?f.x-s.x+(t.offsetWidth>>1):parseInt(i.left,10)+r)+"px",top:(i.top=="auto"?f.y-s.y+(t.offsetHeight>>1):parseInt(i.top,10)+r)+"px"})}o.setAttribute("aria-role","progressbar");e.lines(o,e.opts);if(!n){var l=0,p=i.fps,c=p/i.speed,h=(1-i.opacity)/(c*i.trail/100),m=c/i.lines;(function y(){l++;for(var t=i.lines;t;t--){var r=Math.max(1-(l+t*m)%c*h,i.opacity);e.opacity(o,i.lines-t,r,i)}e.timeout=e.el&&setTimeout(y,~~(1e3/p))})()}return e},stop:function(){var t=this.el;if(t){clearTimeout(this.timeout);if(t.parentNode)t.parentNode.removeChild(t);this.el=i}return this},lines:function(t,e){var i=0,o;function r(t,o){return u(a(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:o,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*i+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(;i<e.lines;i++){o=u(a(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:n&&l(e.opacity,e.trail,i,e.lines)+" "+1/e.speed+"s linear infinite"});if(e.shadow)s(o,u(r("#000","0 0 4px "+"#000"),{top:2+"px"}));s(t,s(o,r(e.color,"0 0 1px rgba(0,0,0,.1)")))}return t},opacity:function(t,e,i){if(e<t.childNodes.length)t.childNodes[e].style.opacity=i}});(function(){function t(t,e){return a("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=u(a("group"),{behavior:"url(#default#VML)"});if(!p(e,"transform")&&e.adj){f.addRule(".spin-vml","behavior:url(#default#VML)");m.prototype.lines=function(e,i){var o=i.length+i.width,r=2*o;function n(){return u(t("group",{coordsize:r+" "+r,coordorigin:-o+" "+-o}),{width:r,height:r})}var a=-(i.width+i.length)*2+"px",f=u(n(),{position:"absolute",top:a,left:a}),l;function p(e,r,a){s(f,s(u(n(),{rotation:360/i.lines*e+"deg",left:~~r}),s(u(t("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(l=1;l<=i.lines;l++)p(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)p(l);return s(e,f)};m.prototype.opacity=function(t,e,i,o){var r=t.firstChild;o=o.shadow&&o.lines||0;if(r&&e+o<r.childNodes.length){r=r.childNodes[e+o];r=r&&r.firstChild;r=r&&r.firstChild;if(r)r.opacity=i}}}else n=p(e,"animation")})();if(typeof define=="function"&&define.amd)define(function(){return m});else t.Spinner=m}(window,document);$.fn.spnr=function(opts){this.each(function(){var $this=$(this),data=$this.data();if(data.spinner){data.spinner.stop();delete data.spinner;}
if(opts!==false){data.spinner=new Spinner($.extend({color:$this.css('color')},opts)).spin(this);}});return this;};function replaceTagsInTables(selector){$(selector).each(function(){var text=$(this).html();var replaced=text.replace(/{(.*?)}/g,'<span class="badge badge-info">$1</span>');$(this).html(replaced);});}
function addTag($el,value,valid){var reg=/<[a-z][\s\S]*>/i,contact='';if(!reg.test(value)){contact=buildTag(value,valid);}else{contact=value;}
$el=checkJquery($el);if($el.hasClass('tag-input')){$el.before(contact);if($el.parent().data('tag-block')){$el.parent().trigger('change.tag');}}else if($el.data('msg-Ñount')){$el.insertAtCaret(contact).trigger('input.count');}else{$el.append(contact);}}
function buildTag(value,valid){var name=value,phone='';if(typeof value==='object'){name=value.name;if(value.phone!=value.name&&typeof value.phone!=='undefined'){phone='<span class="hint">('+value.phone+')</span>';}}
return '<span class="tag-item '+(valid==false?'error':'')+'">'+name+phone+'<a href="#" class="close" onclick="removeTag(this.parentNode); return false;">&times;</a></span>';}
function removeTag($el){$el=checkJquery($el);var $parent=$el.parent();$el.remove();if($parent.data('msg-Ñount')){$parent.trigger('input.count');}else if($parent.data('tag-block')){$parent.trigger('change.tag');}}
function scrollToView(element){element=$(element);if(!element.length){return true;}
var offset=element.offset().top;if(!element.is(":visible")){return true;}
var visible_area_start=$(window).scrollTop();var visible_area_end=visible_area_start+window.innerHeight;if(offset<visible_area_start||offset>visible_area_end){var scrollParent=$('html,body');if(element.closest('.modal').length){scrollParent=element.closest('.modal');}
scrollParent.animate({scrollTop:offset-window.innerHeight/3},500);return false;}
return true;}
var app=app||{};app.syncSelectboxes=function(select1,select2,twoway){if(typeof select1!=='string'||typeof select2!=='string'){throw new TypeError('Invalid parameter type');}else{var selectedText=$(select1).find('option:selected').text().trim();$(select2).find('option').filter(function(){return this.textContent.trim()===selectedText;}).remove();$(select1).find('option').on('click',function(){var optionText=this.textContent.trim(),optionValue=this.value,data=$(select2).data('option-removed');if(data){if(typeof parseInt(data.value,10)==='number'){var targetOption=$(select2).find('option').filter(function(){var currentValue=parseInt(this.value,10);var value=parseInt(data.value,10);return value<currentValue;}).first();if(targetOption.size()){targetOption.after('<option value="'+data.value+'">'+data.text+'</option>');}else{$(select2).append('<option value="'+data.value+'">'+data.text+'</option>');}}else{$(select2).append('<option value="'+data.value+'">'+data.text+'</option>');}}
$(select2).data('option-removed',{text:optionText,value:optionValue});$(select2).find('option').filter(function(){return(this.textContent.trim()===optionText)&&(this.value===optionValue);}).remove();});}};app.syncSelectboxes('#form_first_question','#form_second_question',true);$('#updateQuestionModal').on('show.bs.modal',function(e){var modal=$(this),invoker=e.relatedTarget,selectbox=$(this).find('#form_newQuestion'),storage=new app.Storage(modal);if(invoker.getAttribute('data-answer-id')==='5'){modal.data('seq-quest-num',1);}
if(invoker.getAttribute('data-answer-id')==='6'){modal.data('seq-quest-num',2);}
var optToRecover=storage.readJSON('option-to-recover');if(optToRecover){var prevQuestNum=parseInt(optToRecover.question,10),thisQuestNum=parseInt(modal.data('seq-quest-num'),10);if(thisQuestNum===prevQuestNum){var exists=!!(selectbox.find('option').filter(function(){return this.textContent.trim()===optToRecover.text.trim();}).size());if(!exists){selectbox.append('<option value="'+optToRecover.value+'">'+optToRecover.text+'</option>');}}}
var optionToRemove=storage.readJSON('option-to-remove');if(optionToRemove){var prevQuestionNum=parseInt(optionToRemove.question,10),thisQuestionNum=parseInt(modal.data('seq-quest-num'),10);selectbox.find('option').filter(function(){return this.textContent.trim()===optionToRemove.text&&thisQuestionNum!==prevQuestionNum;}).remove();var optionToRecover={text:optionToRemove.text,value:optionToRemove.value,question:optionToRemove.question};storage.writeJSON('option-to-recover',optionToRecover);}
selectbox.find('option').on('click',function(){var option=this,optionToRemove={text:option.textContent.trim(),value:option.value,question:modal.data('seq-quest-num')};storage.writeJSON('option-to-remove',optionToRemove);});});$('.page-initial').find('input[data-widget=passToggle]').on('change',function(){var input=null;if(this.checked===true){input=$(this).closest('.form-group').find('input[type=password]');input.attr('type','text');}else{input=$(this).closest('.form-group').find('input[type=text]');input.attr('type','password');}});$('.credit-group').add('#addBillingMethodModalCreditdebitcard').find('.payments').children('img').on('click',function(){this.style.opacity=1;$(this).siblings('img').css('opacity',0.25);});function initSearchMessageSwitcher(){var $selectAll=$('a.select-link[data-options-select]'),$searchBox=$('input[name="search-query"]'),counterSel='.select-all > [data-crud-count="count"], .select-link > [data-crud-count="count"]',wholeTableText='items in the table',searchText='<span>items</span>';if(!$selectAll.length||!$searchBox.length){return false;}
if($searchBox.val().length){$selectAll.each(function(){$(this).html($(this).html().replace(wholeTableText,searchText));$(this).closest('[data-options-table]').find(counterSel).text('visible');});}else{$selectAll.each(function(){$(this).html($(this).html().replace(searchText,wholeTableText));});}}
function pushUrlChange(){if(typeof _gaq!=='object'){return false;}
_gaq.push(['_trackPageview',location.pathname+location.search+location.hash]);return true;}
function initClickableOptions(selector){$(selector).find('option[data-href]').prop('disabled',false);$(selector).off('change.clickableOption').on('change.clickableOption',function(env){env.stopPropagation();env.preventDefault();var $selected=$(this).find(':selected');if($selected.data('href')){$selected.removeAttr('selected');$(this).find('option:first').prop('selected',true);window.location.href=$selected.data('href');return false;}});}
function initChosen(selector){if(jQuery().chosen){$(selector).each(function(){var width=$(this).data('chosen-width')||'100%',search_contains=$(this).data('chosen-search_contains')||true;var options={search_contains:search_contains};if(width!=='auto'){options.width=width;}
$(this).chosen(options);});}}
$(window).bind('resize',function(){var w=$(this).width(),threshold=768;if(w<threshold){$('.nav-justified').hide().fadeIn();}});function preventDragnDrop(selector){$(selector).bind("dragover",function(e){e.preventDefault();return false;});$(selector).bind("drop",function(e){e.preventDefault();return false;});}
function notyMessage(text,options){if(typeof(window.noty)==='undefined'){return false;}
options=$.extend({},{text:text,type:'success',layout:'tmTopRight',theme:'tmTheme',closeWith:['button','click','backdrop'],timeout:3000,animation:{open:{opacity:'toggle'},close:{height:'toggle'},easing:'swing',speed:300}},options);return new noty(options);}
function getAvatarClass(phone,name,avatar,entityType,isFavorited){if(!phone){phone='';}
name=name.replace(' null','');var phone6Char=phone.substr(phone.length-6);if(entityType=='list'){phone6Char=0;name.split('').forEach(function(v){phone6Char+=v.charCodeAt(),10;});}
if(entityType=='reply'){phone6Char=name.trim('+').substr(phone.length-6);}
var cn='avatar ';cn+='avatar-'+(phone6Char%36+1);switch(entityType){case 'contact':if(name.trim()==phone.trim().replace('+','')){cn+=(avatar?'':' avatar-user');}
break;case 'list':break;case 'reply':cn+=' avatar-phone';break;}
if(isFavorited){cn+=' starred';}
return cn;};function getAvatarLabel(phone,name,avatar,entityType){if(!avatar&&entityType=='list'){return '<i class="tmi30 tmi30-person-two tmi30-12px"></i>';}
if(avatar||entityType!='contact'){return '';}
var name=name.replace(' null','').replace(/([\uD800-\uDBFF][\uDC00-\uDFFF])/,'');if(name.trim()==phone.trim().replace('+','')){return '';}
var n=new String(name);n=n.split(' ');if(n.length===1){var f=n[0].substr(0,1).toUpperCase();return f+f;}
var f=n[0].substr(0,1).toUpperCase();var l=n[1];return f+(l?l.substr(0,1).toUpperCase():f);};function highlight(value,query){if(!query){return value;}
if(typeof(RegExp.escape)!=='function'){RegExp.escape=function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');};}
try{var startPositions=[];var endPositions=[];var lcValue=value.toLowerCase();query.replace('+','').split(' ').map(function(word){if(!word)return '';var pos=lcValue.indexOf(word.toLowerCase());if(pos!==-1){startPositions.push(pos);endPositions.push(pos+word.length-1);}});value=value.split('').map(function(str,i){if(startPositions.indexOf(i)!==-1){str='<span class="chat-highlight">'+str;}
if(endPositions.indexOf(i)!==-1){str=str+'</span>';}
return str;}).join('');return value;}catch(e){return query;}};function replaceEmojis(cls){if(typeof(window.twemoji)==='object'&&!app.isMacOs()){$('.has-emojis').each(function(k,v){twemoji.parse(v);});}}